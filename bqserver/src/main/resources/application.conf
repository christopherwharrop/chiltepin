bqserver {

  # The batch system type
  type = moab-torque

  bqstat {
    # Number of seconds between batch system status updates
    update-interval = 15
  }

  bqsub {
    # Minimum number of threads for job submission service
    min-submit-threads = 2

    # Maximum number of threads for job submission service
    max-submit-threads = 12
  }
}
  
# DO NOT MODIFY BELOW THIS LINE UNLESS YOU KNOW WHAT YOU ARE DOING!!
bqgateway {
  akka {

    log-dead-letters-during-shutdown = off

    actor {
      provider = "akka.remote.RemoteActorRefProvider"
    }
    remote {

      log-remote-lifecycle-events = off

      untrusted-mode = on
      trusted-selection-paths = ["/user/bqGateway"]
      enabled-transports = ["akka.remote.netty.ssl"]
      netty.ssl{
        port = 0
        enable-ssl = true
        security {
          key-store = "src/main/resources/keystore"
          key-store-password = "nvnScV2KHwlRTaC2GiHxpGKAVhs1x2azhQAi2pdxgOA5TaNJnmkOM89cgi5Dbupy"
          key-password = "2nkRx4ngCO49K82QNDrzBjzs6z3VZWQMiTOLtePRDqwa8oLJzqZ74PDcmptHfEaQ"
          trust-store = "src/main/resources/truststore"
          trust-store-password = "SfVCmLd8Vd00OarOHpREExVTIHgxo3T3ZlbYmgX9A2BV0JhuA8FZgHTvLeusbtlC"
          protocol = "TLSv1"
          random-number-generator = "AES128CounterSecureRNG"
          enabled-algorithms = ["TLS_RSA_WITH_AES_128_CBC_SHA"]
        }
      }

    }

  }

}

bqworker {
  akka {

    log-dead-letters-during-shutdown = off

    actor {
      deployment {
        /bqSub {
          router = round-robin-pool
          nr-of-instances = ${bqserver.bqsub.min-submit-threads}
          pool-dispatcher {
            type = akka.dispatch.BalancingDispatcherConfigurator
            fork-join-executor.parallelism-min = ${bqserver.bqsub.min-submit-threads}
            fork-join-executor.parallelism-max = ${bqserver.bqsub.max-submit-threads}
          }
          resizer {
            enabled = on
            lower-bound = ${bqserver.bqsub.min-submit-threads}
            upper-bound = ${bqserver.bqsub.max-submit-threads}
            messages-per-resize = 6
          }
        }
      }   
    }
  }
}
